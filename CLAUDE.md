# ü§ñ CLAUDE.md - –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ Telegram Claude Agent

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**Telegram Claude Agent** - —ç—Ç–æ –ò–ò-–∞–≥–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Telegram-—á–∞—Ç–æ–≤ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Claude –∏ OpenAI.

**üåê –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç**: https://answerbo1.streamlit.app/

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:
- **Backend**: FastAPI (Python) - API —Å–µ—Ä–≤–µ—Ä –∏ Telegram –∞–≥–µ–Ω—Ç
- **Frontend**: Streamlit - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è  
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL/SQLite - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π –∏ –ª–æ–≥–æ–≤
- **AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: Claude (Anthropic) –∏ OpenAI GPT
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: Telethon –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–Ω–∞–ª–æ–≤ *(NEW)*

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **backend/main.py**: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å TelegramAgent
- **backend/main_app_platform.py**: –ü—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä –¥–ª—è DigitalOcean
- **backend/core/telegram_agent.py**: –õ–æ–∫–∞–ª—å–Ω—ã–π Telegram –∫–ª–∏–µ–Ω—Ç
- **backend/core/telegram_agent_app_platform.py**: –ü—Ä–æ–¥–∞–∫—à–Ω Telegram –∫–ª–∏–µ–Ω—Ç
- **backend/services/analytics_service.py**: –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å Telethon
- **frontend/app.py**: –ì–ª–∞–≤–Ω–æ–µ Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
- **frontend/components/api_client.py**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç
- **frontend/pages/analytics.py**: –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —á–∞—Ç–æ–≤
- **run.py**: Unified runner –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **streamlit_app.py**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Streamlit Cloud

---

## üõ†Ô∏è –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### ‚ö†Ô∏è –ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û:
**–í–°–ï–ì–î–ê –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ** - –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –≤–∫–ª—é—á–∞—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, –æ—à–∏–±–∫–∏, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É.

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
1. **–Ø–∑—ã–∫**: –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –ª–æ–≥–∏ - –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å API –∫–ª—é—á–∏ –∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **UX**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
5. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ backend/frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîÑ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π workflow –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

#### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
# 1. –ö–æ–º–º–∏—Ç –∏ –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π
git add .
git commit -m "üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã"
git push origin main

# 2. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û–ï –æ–∂–∏–¥–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è
sleep 130  # –ñ–¥–∞—Ç—å 130 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

# 3. –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –¥–µ–ø–ª–æ—è
gh run list --limit 1
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ commit —Å–æ–æ–±—â–µ–Ω–∏–π:
- `üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:` - –±–∞–≥—Ñ–∏–∫—Å—ã
- `‚ú® –î–æ–±–∞–≤–ª–µ–Ω–æ:` - –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞:` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ docs
- `üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:` - —Ç–µ—Å—Ç—ã –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `üóëÔ∏è –û—á–∏—Å—Ç–∫–∞:` - —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –∫–æ–¥–∞
- `‚ôªÔ∏è –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:` - —É–ª—É—á—à–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–¥–∞

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞:
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
def create_campaign(campaign_data):
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞–º–ø–∞–Ω–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏
    if existing_campaign_exists(campaign_data.name):
        raise HTTPException(detail="–ö–∞–º–ø–∞–Ω–∏—è —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º  
def create_campaign(campaign_data):
    """Create new monitoring campaign"""
    # Check for duplicate name
```

---

## üîß –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (Makefile):
```bash
make help                # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make install            # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make setup              # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç (—Å–æ–∑–¥–∞—Ç—å .env)
make dev-setup          # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
make run                # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É (unified runner)
make run-backend        # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ backend (FastAPI)
make run-frontend       # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ frontend (Streamlit)
make test               # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã API
make check              # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
make clean              # –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
make init-db            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

### –ö–æ–º–∞–Ω–¥—ã Python:
```bash
# Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
python backend/main.py                    # –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º
python backend/main_app_platform.py      # –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º

# Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞  
streamlit run streamlit_app.py           # Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
streamlit run frontend/app.py            # –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫

# Unified runner (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python run.py                            # Backend + Frontend

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
python tests/test_api.py                 # API —Ç–µ—Å—Ç—ã
python -m pytest tests/                  # Pytest runner

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
python database/seed_data.py             # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é:
- **Python**: 3.11+ (backend), 3.13+ (Streamlit Cloud)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (dev), PostgreSQL (prod)
- **Telegram API**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ credentials
- **AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**: Claude –∏–ª–∏ OpenAI (–º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω)

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:

#### Campaign (–ö–∞–º–ø–∞–Ω–∏—è)
```python
{
    "id": int,
    "name": str,                    # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏
    "active": bool,                 # –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    "telegram_chats": list,         # –°–ø–∏—Å–æ–∫ ID —á–∞—Ç–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    "keywords": list,               # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞-—Ç—Ä–∏–≥–≥–µ—Ä—ã
    "telegram_account": str,        # –ê–∫–∫–∞—É–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
    "ai_provider": str,             # "claude" | "openai"
    "system_instruction": str,      # –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ò–ò
    "context_messages_count": int   # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
}
```

#### CompanySettings (–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏)  
```python
{
    "name": str,                    # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
    "telegram_accounts": list,      # –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ Telegram –∞–∫–∫–∞—É–Ω—Ç—ã
    "ai_providers": dict,           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
    "default_settings": dict        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
}
```

#### DirectChannelAnalysisRequest (–ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ –∫–∞–Ω–∞–ª–∞) *(NEW)*
```python
{
    "channel_name": str,            # @channel –∏–ª–∏ ID –∏–ª–∏ username
    "limit_messages": int,          # 100-10000 —Å–æ–æ–±—â–µ–Ω–∏–π
    "start_date": datetime,         # –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    "end_date": datetime,           # –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
    "include_media": bool,          # –í–∫–ª—é—á–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
    "include_replies": bool,        # –í–∫–ª—é—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
    "keywords_filter": list         # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
}
```

---

## üåê API –ø—Ä–∞–≤–∏–ª–∞

### Endpoints —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- `/campaigns/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏
- `/chats/` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–∞—Ç–æ–≤  
- `/logs/` - –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `/company/` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- `/analytics/` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–æ–≤ *(NEW)*

### –ù–æ–≤—ã–µ Analytics endpoints *(NEW)*:
```bash
POST /analytics/analyze-channel       # –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ –∫–∞–Ω–∞–ª–∞
GET /analytics/channel-info/{name}    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–∞–ª–µ
GET /analytics/analyze/{id}/status    # –°—Ç–∞—Ç—É—Å –∞–Ω–∞–ª–∏–∑–∞
GET /analytics/analyze/{id}/results   # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
GET /analytics/analyze               # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
DELETE /analytics/analyze/{id}       # –£–¥–∞–ª–∏—Ç—å –∞–Ω–∞–ª–∏–∑
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **Campaign cache TTL**: 10 —Å–µ–∫—É–Ω–¥ (–±—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü—Ä–∏ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∫–∞–º–ø–∞–Ω–∏–π
- **API endpoint**: `POST /campaigns/refresh-cache`
- **Analytics —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –í –ø–∞–º—è—Ç–∏ –¥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
raise HTTPException(
    status_code=404,
    detail="–ö–∞–º–ø–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
)

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
raise HTTPException(
    status_code=404, 
    detail="Campaign not found"
)
```

---

## üñ•Ô∏è Frontend –ø—Ä–∞–≤–∏–ª–∞

### Streamlit –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–º–æ–¥—É–ª—å–Ω–∞—è):
```
frontend/
‚îú‚îÄ‚îÄ app.py                 # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–≤–∏–≥–∞—Ü–∏—è + main)
‚îú‚îÄ‚îÄ components/           # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
‚îÇ   ‚îú‚îÄ‚îÄ api_client.py     # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ forms.py          # –û–±—â–∏–µ —Ñ–æ—Ä–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ ui_components.py  # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ pages/               # –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py      # üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–æ–≤ (NEW)
‚îÇ   ‚îî‚îÄ‚îÄ statistics.py    # üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îî‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ helpers.py        # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
    ‚îî‚îÄ‚îÄ demo_data.py      # –î–µ–º–æ –¥–∞–Ω–Ω—ã–µ
```

### –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç *(NEW)*:
```python
# frontend/components/api_client.py
class APIClient:
    # –ö–∞–º–ø–∞–Ω–∏–∏
    def get_campaigns(self) -> Optional[list]
    def create_campaign(self, data) -> Optional[Dict]
    
    # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (NEW)
    def get_channel_info(self, channel_name) -> Optional[Dict]
    def start_channel_analysis(self, data) -> Optional[Dict]
    def get_analysis_status(self, analysis_id) -> Optional[Dict]
    def get_analysis_results(self, analysis_id) -> Optional[Dict]
    def list_analyses(self) -> Optional[Dict]
    def delete_analysis(self, analysis_id) -> Optional[Dict]
```

### –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ backend
server_status = check_server_status()

if server_status:
    show_real_data_page()    # –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
else:
    show_demo_page()         # –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (–∑–∞–≥–ª—É—à–∫–∏)
```

### UX –ø—Ä–∏–Ω—Ü–∏–ø—ã:
1. **–°—Ç–∞—Ç—É—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**: –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (üü¢üî¥)
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è
4. **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –û–ø—Ü–∏—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è live-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
5. **–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–ø–µ—Ä–∞—Ü–∏–π**: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π *(NEW)*

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# Telegram API
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=+1234567890

# AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–ø–æ –≤—ã–±–æ—Ä—É)
ANTHROPIC_API_KEY=sk-ant-api03-...     # –î–ª—è Claude
OPENAI_API_KEY=sk-proj-...             # –î–ª—è OpenAI

# Backend
API_HOST=127.0.0.1
API_PORT=8000
DEBUG=True

# Streamlit Cloud (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
BACKEND_API_URL=https://your-backend.herokuapp.com
```

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Analytics *(NEW)*:
```bash
# Telegram API –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (—Ç–µ –∂–µ —á—Ç–æ –∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞)
TELEGRAM_API_ID=12345678           # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è analytics
TELEGRAM_API_HASH=your_api_hash    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è analytics
TELEGRAM_PHONE=+1234567890         # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è analytics
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: SQLite (campaigns.db)
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: PostgreSQL
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –†—É—á–Ω—ã–µ SQL —Ñ–∞–π–ª—ã –≤ `database/migrations/`

---

## üîß Services Architecture *(NEW)*

### Analytics Service:
```python
# backend/services/analytics_service.py
class AnalyticsService:
    """–°–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ Telegram —á–∞—Ç–æ–≤ —Å Telethon"""
    
    async def initialize() -> bool           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –∫–ª–∏–µ–Ω—Ç–∞
    async def get_channel_info(name) -> dict # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–∞–ª–µ
    async def analyze_chat(config) -> ChatAnalytics # –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    
    # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞
    def _analyze_messages(messages) -> dict   # –ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
    def _analyze_participants(chat) -> dict  # –ê–Ω–∞–ª–∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    def _analyze_time_patterns(messages) -> dict # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
    def _analyze_keywords(messages) -> dict   # –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–≤
    def _analyze_media(messages) -> dict     # –ê–Ω–∞–ª–∏–∑ –º–µ–¥–∏–∞
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è *(NEW)*:
```python
def __init__(self):
    # –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    api_id_str = os.getenv("TELEGRAM_API_ID")
    self.api_id = int(api_id_str) if api_id_str else None
    
    if self.api_id and self.api_hash:
        self.client = TelegramClient("analytics_session", self.api_id, self.api_hash)
    else:
        self.client = None
        print("‚ö†Ô∏è Analytics Service: Telegram API credentials –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã")
```

---

## üìà Analytics Features *(NEW)*

### –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ –∫–∞–Ω–∞–ª–æ–≤:
- **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–∞–º–ø–∞–Ω–∏–π**: –ê–Ω–∞–ª–∏–∑ –ª—é–±–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **Flexible –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ü–µ—Ä–∏–æ–¥, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ñ–∏–ª—å—Ç—Ä—ã
- **–§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ BackgroundTasks
- **Rich analytics**: –£—á–∞—Å—Ç–Ω–∏–∫–∏, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –º–µ–¥–∏–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –∞–Ω–∞–ª–∏–∑–∞:
1. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Ç–∏–ø—ã, —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞
2. **–ê–Ω–∞–ª–∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**: –¢–æ–ø –∞–≤—Ç–æ—Ä—ã, –±–æ—Ç—ã, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ —á–∞—Å–∞–º, –ø–∏–∫–æ–≤—ã–µ –ø–µ—Ä–∏–æ–¥—ã  
4. **–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ–≤–∞, —Ö–µ—à—Ç–µ–≥–∏, —É–ø–æ–º–∏–Ω–∞–Ω–∏—è
5. **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã**: –¢–∏–ø—ã –º–µ–¥–∏–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π
6. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**: CSV/JSON –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### UI –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:
- **–§–æ—Ä–º–∞ –∞–Ω–∞–ª–∏–∑–∞**: –í–≤–æ–¥ –∫–∞–Ω–∞–ª–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–∞–ª–∞**: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º
- **–ü—Ä–æ–≥—Ä–µ—Å—Å —Ç—Ä–µ–∫–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã
- **–ò—Å—Ç–æ—Ä–∏—è**: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤

---

## üõ†Ô∏è Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
**–°–∏–º–ø—Ç–æ–º—ã**: –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö
**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω –ª–∏ backend
curl http://127.0.0.1:8000/health

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backend –ª–æ–∫–∞–ª—å–Ω–æ
cd backend
python main.py
```

#### 2. Analytics Service –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç *(NEW)*
**–°–∏–º–ø—Ç–æ–º—ã**: 
- `Analytics Service –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω`
- `Analytics Service –ù–ï –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω`
- `The key is not registered in the system`
- –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ

**–†–µ—à–µ–Ω–∏–µ –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**:
```bash
# 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–û–î–ù–û–†–ê–ó–û–í–û)
cd telegram_claude_agent
export TELEGRAM_API_ID=your_api_id
export TELEGRAM_API_HASH=your_api_hash
export TELEGRAM_PHONE=your_phone

python authorize_telegram.py
# –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS

# 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª analytics_session.session –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
# –î–ª—è DigitalOcean App Platform - —á–µ—Ä–µ–∑ git commit
git add analytics_session.session
git commit -m "üîê –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª —Å–µ—Å—Å–∏–∏ Telegram"
git push

# 3. –í production –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash  
TELEGRAM_PHONE=your_phone

# –ë–æ–ª—å—à–µ –ù–ï –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–æ–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏!
```

#### 3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã**: –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –ø–æ —Å—Ç–∞—Ä—ã–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
**–†–µ—à–µ–Ω–∏–µ**:
- –ü–æ–¥–æ–∂–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥ (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞)
- –ò–ª–∏ –Ω–∞–∂–∞—Ç—å "üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à –∫–∞–º–ø–∞–Ω–∏–π"

#### 4. Telegram –∞–≥–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
**–°–∏–º–ø—Ç–æ–º—ã**: `telegram_connected: false` –≤ /health
**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $TELEGRAM_API_ID
echo $TELEGRAM_PHONE

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f backend/logs/telegram.log
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
print("üîÑ –ö—ç—à –∫–∞–º–ø–∞–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω: 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π")
print("‚úÖ Analytics Service –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Telegram")
print("‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–Ω–∞–ª–∞ @test: Connection timeout")

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
print("Cache updated")
print("Connected")
print("Error")
```

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### –ú–Ω–æ–≥–æ—Ñ–∞–π–ª–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- **TelegramAgent**: –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ - –ª–æ–∫–∞–ª—å–Ω—ã–π (`telegram_agent.py`) –∏ –ø—Ä–æ–¥–∞–∫—à–Ω (`telegram_agent_app_platform.py`)
- **Main —Ñ–∞–π–ª—ã**: `main.py` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, `main_app_platform.py` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- **Requirements**: –†–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Python 3.11 vs 3.13)
- **Session —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: `analytics_session.session` –¥–ª—è Telethon –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
1. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π `python run.py` –∏–ª–∏ Makefile –∫–æ–º–∞–Ω–¥—ã
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: API —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π backend (`make test`)
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
4. **Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ `authorize_telegram.py`
5. **Frontend/Backend —Å–≤—è–∑—å**: API client –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ demo —Ä–µ–∂–∏–º

### –í–∞–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: frontend/pages/ + components/ + utils/
- **Unified API Client**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å backend
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: TTL 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è campaigns, –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è analytics
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –†—É—Å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, graceful degradation
- **Async/Await**: Telethon –∏ FastAPI –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
1. **API –∫–ª—é—á–∏**: –¢–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∏–∫–æ–≥–¥–∞ –≤ –∫–æ–¥–µ
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **CORS**: –í –ø—Ä–æ–¥–∞–∫—à–Ω —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã –≤–º–µ—Å—Ç–æ "*"
4. **Telegram Sessions**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ session —Ñ–∞–π–ª–æ–≤
5. **Analytics Data**: –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —á–∞—Ç–æ–≤ *(NEW)*

### –ü—Ä–∏–º–µ—Ä –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫–æ–¥–∞:
```python
# ‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–¢–¨
claude_api_key = "sk-ant-api03-real-key-here"  # –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –∫–ª—é—á
print(f"Using API key: {api_key}")             # –õ–æ–≥–∏—Ä—É–µ—Ç —Å–µ–∫—Ä–µ—Ç
```

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:
```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
claude_api_key = os.getenv("ANTHROPIC_API_KEY")
if not claude_api_key:
    print("‚ùå ANTHROPIC_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
print("‚úÖ Claude API –∫–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω")  # –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∞–º –∫–ª—é—á
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫–∞–º–ø–∞–Ω–∏–π
- **–û—Ç–≤–µ—Ç—ã –∑–∞ 24—á**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–º
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- **–ê–Ω–∞–ª–∏–∑—ã –∑–∞ –¥–µ–Ω—å**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –∫–∞–Ω–∞–ª–æ–≤ *(NEW)*
- **Analytics —Å—Ç–∞—Ç—É—Å**: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Telegram API –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ *(NEW)*

### –°—Ç–∞—Ç—É—Å—ã —Å–∏—Å—Ç–µ–º—ã:
- **üü¢ Healthy**: –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- **üü° Degraded**: –ß–∞—Å—Ç–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å  
- **üî¥ Down**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

### Health Check endpoints:
```bash
GET /health                    # –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
GET /analytics/health          # –°—Ç–∞—Ç—É—Å Analytics Service (NEW)
GET /telegram/status           # –°—Ç–∞—Ç—É—Å Telegram –∞–≥–µ–Ω—Ç–∞
```

---

## üöÄ Deployment

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd telegram-claude-agent

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
python backend/main.py          # Backend API
streamlit run streamlit_app.py  # Frontend
```

### –ü—Ä–æ–¥–∞–∫—à–Ω DigitalOcean App Platform:

#### Environment Variables (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ
TELEGRAM_API_ID=12345678
TELEGRAM_API_HASH=abcdef123456
TELEGRAM_PHONE=+1234567890

# AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã  
ANTHROPIC_API_KEY=sk-ant-api03-...
OPENAI_API_KEY=sk-proj-...

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://user:pass@host:port/db
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è:
```bash
# 1. GitHub Actions —Å—Ç–∞—Ç—É—Å
gh run list --limit 1

# 2. Health check
curl https://your-app.ondigitalocean.app/health

# 3. Analytics health  
curl https://your-app.ondigitalocean.app/analytics/health

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã Streamlit Cloud
# –ù–∞—à –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç: https://answerbo1.streamlit.app/
```

---

## üìù File Structure (–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
‚ùå test_*.py              # –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ç–µ—Å—Ç—ã
‚ùå debug_*.py             # –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚ùå create_session_*.py    # –°–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–π
‚ùå fix_*.py               # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚ùå analyze_*.py           # –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∞–Ω–∞–ª–∏–∑—ã
‚ùå *.md (–∫—Ä–æ–º–µ README)    # –î—É–±–ª–∏—Ä—É—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚ùå *.png                  # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚ùå *.json (temp files)    # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
‚ùå playwright_env/        # –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚ùå test_env/              # –¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚ùå utils/ (root)          # –î—É–±–ª–∏—Ä—É—é—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚ùå backend/models/        # –ü—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

### –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
telegram-claude-agent/
‚îú‚îÄ‚îÄ README.md              # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ CLAUDE.md              # ‚úÖ –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
‚îú‚îÄ‚îÄ requirements*.txt      # ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile, Procfile   # ‚úÖ –î–µ–ø–ª–æ–π —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ streamlit_app.py       # ‚úÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ backend/               # ‚úÖ FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ frontend/              # ‚úÖ Streamlit –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
‚îú‚îÄ‚îÄ database/              # ‚úÖ –ú–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ tests/                 # ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### üåê –ü—Ä–æ–µ–∫—Ç:
- **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç**: [https://answerbo1.streamlit.app/](https://answerbo1.streamlit.app/)

### üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Telethon Documentation](https://docs.telethon.dev/) *(NEW)*
- [Anthropic Claude API](https://docs.anthropic.com/claude/reference)
- [OpenAI API](https://platform.openai.com/docs)
- [Streamlit Documentation](https://docs.streamlit.io/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [DigitalOcean App Platform](https://docs.digitalocean.com/products/app-platform/)

---

## üìà Changelog

### v1.3 (2025-08-06) - Analytics & Refactoring
- ‚úÖ **–ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–µ–∫—Ç–∞**: –£–¥–∞–ª–µ–Ω–∏–µ 50+ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–æ–≤**: –ü—Ä—è–º–æ–π –∞–Ω–∞–ª–∏–∑ –∫–∞–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ Telethon
  - üîç –ê–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏  
  - üë• –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - üìä –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (–ø–æ —á–∞—Å–∞–º/–¥–Ω—è–º)
  - üî§ –ê–Ω–∞–ª–∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, —Ö–µ—à—Ç–µ–≥–æ–≤, —É–ø–æ–º–∏–Ω–∞–Ω–∏–π
  - üìé –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤  
  - üíæ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/JSON
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: Analytics service —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ credentials
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è API**: TypeError —Å json –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: README.md –∏ CLAUDE.md

### v1.2 (2025-08-03) - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ frontend**: pages/, components/, utils/
- ‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –∫–ª–∏–µ–Ω—Ç**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å backend
- ‚úÖ **Backend —Å–µ—Ä–≤–∏—Å—ã**: Analytics service —Å Telethon –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –§–æ–Ω–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞

### v1.1 (2025-08-03)
- ‚úÖ API –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–ø–∞–Ω–∏–∏ (`/company/`)
- ‚úÖ –£–ª—É—á—à–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–æ–≤ –≤ —á–∞—Ç–∞—Ö
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∫—ç—à –∫–∞–º–ø–∞–Ω–∏–π (60‚Üí10 —Å–µ–∫)
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### v1.0
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–∞–º–ø–∞–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude –∏ OpenAI
- ‚úÖ Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–∞—Ç–æ–≤

---

*–≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ª—é–±—ã—Ö –∑–Ω–∞—á–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ* üîÑ